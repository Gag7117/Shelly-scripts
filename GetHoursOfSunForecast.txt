let CONFIG = {
  accuWeatherAPIKEY: "ADD YOUR API-KEY HERE",
  weatherForecastEndpoint:
    "http://dataservice.accuweather.com/forecasts/v1/daily/1day/",
  weatherCurrentEndpoint:
    "http://dataservice.accuweather.com/currentconditions/v1/",
  locations: {
    Timisoara: 290867,
    Sofia: 51097,
    Chicago: 348308,
    Miami: 347936
  },
  boilerControlDevice: "http://192.168.100.140/",
};

function getWeatherURLForLocation(location) {
  return (
    CONFIG.weatherForecastEndpoint +
    JSON.stringify(CONFIG.locations[location]) +
    "?apikey=" +
    CONFIG.accuWeatherAPIKEY +
    "&details=true"
  );
}

function GetSunTime(location) {
  Shelly.call(
    "http.get",
    { url: getWeatherURLForLocation(location) },
    function (response, error_code, error_message, location) {
      let weatherData = JSON.parse(response.body);
      let SunTime = weatherData[0].DailyForecasts.HoursOfSun;
      print(SunTime);
    },
    location
  );
}

GetSunTime("Timisoara");
